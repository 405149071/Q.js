/*!
 * Q.js v0.0.11
 * Inspired from vue.js
 * (c) 2015 Daniel Yang
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.Q=e():t.Q=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1),s=n(3),r=n(2);s.extend(i,s),t.exports=r(i)},function(t){var e=function(){},n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||setTimeout;t.exports={slice:[].slice,noop:e,addClass:function(t,e){if(t.classList)t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",trim(n+e))}},removeClass:function(t,e){if(t.classList)t.classList.remove(e);else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");t.setAttribute("class",trim(n))}},through:function(t){return t},warn:function(){return window.console&&console.error?function(t){console.error(t)}:e},isObject:function(t){return"object"==typeof t},nextTick:function(t,e){e?n(function(){t.call(e)},0):n(t,0)}}},function(t,e,n){t.exports=function(t){function e(e){return t.contains(o.documentElement,e)}function i(t){this._init(t)}var s=n(4),r=n(5).mergeOptions,a=n(6),o=document;return i.options={directives:n(7)},i.get=function(e){var n=t.find(e)[0];return n?t.data(n,"QI"):new this({el:e})},i.all=function(e){var n=this;return t.find(e.el).map(function(i){return new n(t.extend(e,{el:i}))})},t.extend(i,a),t.extend(i.prototype,{_init:function(e){e=e||{},this.$el=e.el&&"string"==typeof e.el?t.find(e.el)[0]:e.el,this.$$={},e=this.$options=r(this.constructor.options,e,this),this._isCompiled=!1,this._isAttached=!1,this._isReady=!1,this._events={},this._watchers={},s.call(this,e),this._initScope(),this._callHook("created"),this.$el&&(t.data(this.$el,"QI",this),this.$mount(this.$el))},data:function(t,e){var n,i=0,s=this;if(~t.indexOf(".")){var r=t.split(".");for(n=r.length;n-1>i;i++)t=r[i],+t+""===t&&(t=+t),s=s[t]}return n&&(t=r[i]),void 0===e?t?s[t]:s:void s.$set(t,e)},$on:function(t,e){return(this._events[t]||(this._events[t]=[])).push(e),this},$once:function(t,e){function n(){i.$off(t,n),e.apply(this,arguments)}var i=this;return n.fn=e,this.$on(t,n),this},$off:function(t,e){var n,i,s;if(!arguments.length)return this._events={},this;if(n=this._events[t],!n)return this;if(1===arguments.length)return this._events[t]=null,this;for(s=n.length;s--;)if(i=n[s],i===e||i.fn===e){n.splice(s,1);break}return this},$watch:function(t,e,n,i){var s=n?t+"**deep**":t;return(this._watchers[s]||(this._watchers[s]=[])).push(e),i&&e(this.data(t)),this},$emit:function(e){if(this._emit.apply(this,arguments),0===e.indexOf("data:")){var n=t.slice.call(arguments,1);n.unshift(e.substring(5)),this._callDataChange.apply(this,n)}return this},_emit:function(e){var n=this._events[e];if(n){for(var i=arguments.length-1,s=new Array(i);i--;)s[i]=arguments[i+1];i=0,n=n.length>1?t.slice.call(n,0):n;for(var r=n.length;r>i;i++)n[i].apply(this,s)}},_clearWatch:function(t){t+=".";var e;for(e in this._watchers)~e.indexOf(t)&&(this._watchers[e].length=0)},_callDataChange:function(e){var e,n=e.split("."),i={_events:this._watchers},r=t.slice.call(arguments,1),a=this._emit;r.unshift(e),r[1]instanceof s&&"length"in r[1]&&this._clearWatch(e),a.apply(i,r);for(;n.length>0;)e=n.join("."),r[0]=e+"**deep**",r[1]=this.data(e),a.apply(i,r),n.pop()},_initScope:function(){this._initMethods()},_initMethods:function(){var t,e=this.$options.methods;if(e)for(t in e)this[t]=e[t].bind(this)},$mount:function(n){return this._isCompiled?t.warn("$mount() should be called only once"):(this._compile(n),this._isCompiled=!0,this._callHook("compiled"),void(e(this.$el)?(this._callHook("attached"),this._ready()):this.$once("hook:attached",this._ready)))},_ready:function(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")},_compile:function(t){this.transclue(t,this.$options)},transclue:function(e,n){t.find(".q-mark",e).length?this._renderedBind(e,n):this._templateBind(e,n)},_templateBind:n(8),_renderedBind:function(){},_callHook:function(t){var e=this.$options[t];if(e)for(var n=0,i=e.length;i>n;n++)e[n].call(this);this.$emit("hook:"+t)},_makeReadFilters:function(e){if(!e.length)return[];var n=this.$options.filters,i=this;return e.map(function(e){var s,r=e.split(" ");return e=r.shift(),s=n[e]?n[e].read||n[e]:t.through,function(t){return r?s.apply(i,[t].concat(r)):s.call(i,t)}})},applyFilters:function(t,e,n){if(!e||!e.length)return t;for(var i=0,s=e.length;s>i;i++)t=e[i].call(this,t,n);return t}}),t.extend(i.prototype,s.prototype),i}},function(t){var e=function(t,e){e=[].splice.call(arguments,1);for(var n,i,s=0,r=e.length;r>s;s++){n=e[s];for(i in n)t[i]=n[i]}return t},n="QDataUid",i=0,s={};t.exports={find:function(t){return document.querySelectorAll(t)},contains:function(t,e){return t!==e&&t.contains(e)},data:function(t,e,r){var a=t[n]=t[n]||++i,o=s[a]=s[a]||{};return void 0===r?o[e]:o[e]=r},cleanData:function(){},add:function(t,e,n){t.addEventListener(e,n,!1)},remove:function(t,e,n){t.removeEventListener(e,n,!1)},clone:function(t){return t.cloneNode(!0)},extend:function(t){return 1===arguments.length?e(this,t):e.apply(this,arguments)}}},function(t,e,n){function i(t,e,n){+e+""===e&&(e=+e);var i={data:n,up:t,top:t._top,namespace:[t._namespace,e].join(".")};t[e]="object"==typeof n&&null!==n?s(n)?new a(i):new r(i):n}function s(t){return Array.isArray(t)||t instanceof a}function r(t){var e=t.data,n=Object.keys(t.data||{}).filter(function(t){return 0!==t.indexOf("_")}),s=this;o.extend(this,e),this._keys=n,this._up=t.up,this._top=t.top||this,this._namespace=t.namespace||"",n.forEach(function(t){i(s,t,e[t])}),Array.isArray(e)?this.length=n.length:e instanceof a&&(this.length=n.length-1)}function a(t){r.call(this,t)}var o=n(1);o.extend(r.prototype,{$namespace:function(t){return(void 0!==t?[this._namespace,t].join("."):this._namespace).substring(1)},$set:function(t,e){return i(this,t,e),this._top.$emit("data:"+this.$namespace(t),this[t]),this},$get:function(){var t,e=this._keys,n=this;return t=this instanceof r?{}:[],e.forEach(function(e){t[e]=n[e].$get?n[e].$get():n[e]}),t}}),o.extend(a.prototype,r.prototype,{push:function(t){return i(this,this.length,t),this._keys.push(this.length),this.length++,this._top.$emit("data:"+this.$namespace(),this),this},pop:function(){var t=this[--this.length];return this[this.length]=null,delete this[this.length],this._keys.pop(),this._top.$emit("data:"+this.$namespace(),this),t},unshift:function(t){this._keys.push(this.length),this.length++;for(var e=this.length;e--;)this[e]=this[e-1];return i(this,0,t),this._top.$emit("data:"+this.$namespace(),this),this},shift:function(){this.length--;for(var t=this[0],e=0,n=this.length;n>e;e++)this[e]=this[e+1];return this._keys.pop(),this._top.$emit("data:"+this.$namespace(),this),t},touch:function(t){this._top.$emit("data:"+this.$namespace(t),this)},indexOf:function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},splice:function(t,e){for(var n=0,i=e+t,s=this.length-e;s>t;t++,n++)this[t]=this[i+n],this[t]._namespace=this[t]._namespace.replace(/\.(\d+?)$/,"."+t);for(;t<this.length;t++)this[t]=null,delete this[t];this.length-=e,this._keys.splice(this.length,e),this._top.$emit("data:"+this.$namespace(),this)},forEach:function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e)},filter:function(t){var e=[];return this.forEach(function(n){t(n)&&e.push(n)}),e}}),t.exports=r},function(t,e,n){function i(t,e,n){function i(i){var s=r[i]||a;o[i]=s(t[i],e[i],n,i)}var s,o={};for(s in t)i(s);for(s in e)t.hasOwnProperty(s)||i(s);return o}var s=n(1),r={};r.created=r.ready=r.attached=r.detached=r.compiled=r.beforeDestroy=r.destroyed=r.paramAttributes=function(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t},r.methods=r.directives=function(t,e){return e?t?s.extend({},t,e):e:t};var a=function(t,e){return void 0===e?t:e};t.exports={strats:r,mergeOptions:i}},function(t,e,n){function i(t){t=t||{};var e=this,n=s(t.name||"QComponent");return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.options=h(e.options,t),n["super"]=e,n.extend=e.extend,n.get=e.get,n.all=e.all,n}function s(t){return new Function("return function "+t+" (options) { this._init(options) }")()}var r,a,o={},h=n(5).mergeOptions,c=window.define,u=window.require;c&&u?(r=function(t,e){var n=this.extend(e);return c(t,n),n},a=function(t,e){return u(t,e)}):(r=function(t,e){return o[t]=this.extend(e),o[t]},a=function(t,e){var n=this;return e?e.apply(window,t.map(function(t){return o[t]||n})):o[t]||this}),t.exports={define:r,require:a,extend:i}},function(t,e,n){var i=n(1);t.exports={show:function(t){var e=this.el;e.style.display=t?"block":"none"},"class":function(t){var e=this.el,n=this.arg;t?i.addClass(e,n):i.removeClass(e,n)},value:function(t){var e=this.el;"checkbox"===e.type?e.checked=t:e.value=t},text:function(t){void 0!==t&&(this.el.innerText=t)},on:{bind:function(){var t=this.target||this.exp.match(/^[\w\-]+/)[0],e=this.exp,n=this.filters,s=this.vm,r=s.applyFilters(this.vm[t],n),a=this.namespace?s.data(this.namespace):s;i.add(this.el,this.arg,function(){return r&&"function"==typeof r?void(e?r.call(s,a):r.apply(s,arguments)):i.warn("You need implement the "+t+" method.")})}},model:{bind:function(){var t=this.target,e=this.namespace||"",n=this.el,s=this.vm;i.add(n,"input onpropertychange change",function(){s.data(e).$set(t,n.value)})},update:function(t){this.el.value=t}},vm:{bind:function(){this.el.removeAttribute("q-vm"),this.setting.stop=!0;var t=this.arg,e=this.vm,n=this.target,i=this.namespace,s=i?[i,n].join("."):n,r=e.data(s),a=new(e.constructor.require(t))({el:this.el,data:r.$get()});e._children=e._children||[],e._children.push(a),e.$watch(s,function(t){e.$set(n,t)},!0,!1)}}}},function(t,e,n){function i(t,e,n){var s,r,h,c,u,l,f;for(s=0;c=t[s++];){if(1===c.nodeType){if(n.useCache&&(f=c.getAttribute("qtid"))&&(l=a.get(f)))c.removeAttribute("qtid");else{for(u=c.attributes,h=u.length,l=[],r=0;h>r;r++)0===u[r].name.indexOf("q-")&&l.push({name:u[r].name,value:u[r].value});n.useCache&&!f&&(f=f||++o,c.setAttribute("qtid",f),a.put(f,l))}l.length>0&&e(c,l,n)}c.childNodes.length&&!n.stop&&i(c.childNodes,e,n),n.stop=!1}}var s=n(9),r=n(1),a=new(n(10))(1e3),o=0;t.exports=function(t,e){e=e||{};var n=this,a=n.$options.directives,o=(e.index,e.data||n),h=e.namespace;i([t],function(t,c,u){c.forEach(function(c){var l=c.name.substring(2),f=a[l],p=s(c.value);f&&p.forEach(function(i){var s=n._makeReadFilters(i.filters),a=i.target,c=h?[h,a].join("."):a,l=r.isObject(f)?f.update:f,p=r.extend({el:t,vm:n,namespace:h,setting:u},i,{filters:s});l&&n.$watch(c,function(t){t=n.applyFilters(t,s),l.call(p,t)},"object"==typeof o[a],e.immediate||void 0!==o[a]),r.isObject(f)&&f.bind&&f.bind.call(p)}),"repeat"===l&&t.parentNode&&!u.unrepeat&&(u.unrepeat=!0)&&p.forEach(function(e){var s=e.target,a=h?[h,s].join("."):s,o=n._makeReadFilters(e.filters),c=[],u=t,l=document.createComment("q-repeat");t.parentNode.replaceChild(l,u),i([u],r.noop,{useCache:!0,unrepeat:!0}),o.push(function(t){c.length&&(c.forEach(function(t){t.parentNode.removeChild(t)}),r.cleanData(c),c.length=0);var e,i=document.createDocumentFragment();t.forEach(function(t){e=r.clone(u),n._templateBind(e,{data:t,namespace:t.$namespace(),immediate:!0,useCache:!0}),c.push(e),i.appendChild(e)}),l.parentNode.insertBefore(i,l)}),n.$watch(a,function(t){r.nextTick(function(){n.applyFilters(t,o),n.$emit("repeat-render")})},!1,!0)})})},{useCache:e.useCache})}},function(t,e,n){function i(t){var e=s.get(t);if(e)return e;var n=t.trim().split(/ *\, */),i=/^([\w\-]+)\:/,r=/^[\w\-]+$/,a=[];return n.forEach(function(t){var e,t,n={},s=t.match(i);s&&(n.arg=s[1],t=t.substring(s[0].length).trim()),e=t.split(/ *\| */),t=e.shift(),r.test(t)?n.target=t:n.exp=t,n.filters=e,a.push(n)}),s.put(t,a),a}var s=(n(1),new(n(10))(1e3));t.exports=i},function(t){function e(t){this.size=0,this.limit=t,this.head=this.tail=void 0,this._keymap={}}var n=e.prototype;n.put=function(t,e){var n={key:t,value:e};return this._keymap[t]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():void this.size++},n.shift=function(){var t=this.head;return t&&(this.head=this.head.newer,this.head.older=void 0,t.newer=t.older=void 0,this._keymap[t.key]=void 0),t},n.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail?e?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,e?n:n.value)},t.exports=e}])});