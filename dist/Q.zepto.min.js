/*!
 * Q.js v0.6.0
 * Inspired from vue.js
 * (c) 2016 Daniel Yang
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("zepto")):"function"==typeof define&&define.amd?define(["zepto"],e):"object"==typeof exports?exports.Q=e(require("zepto")):t.Q=e(t.Zepto)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1),s=n(3),r=n(5);s.extend(i,s),t.exports=r(i)},function(t,e,n){function i(t,e,n){for(var i,s=0,r=o.length;r>s;s++)if(i="q-"+o[s],t.hasAttribute(i))return e.push({name:i,value:t.getAttribute(i)}),t.removeAttribute(i),!0}function s(t,e,n){n=n||{};var r,a,o,h,l,u;for(r=0;h=t[r++];){if(1===h.nodeType){if(l=h.attributes,u=[],!i(h,u,n))for(a=0,o=l.length;o>a;a++)0===l[a].name.indexOf("q-")&&u.push({name:l[a].name,value:l[a].value});u.length>0&&e(h,u,n)}h.childNodes.length&&!n.stop&&s(c.call(h.childNodes,0),e,n),n.stop=!1}}var r=function(){},a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||setTimeout,o=(new(n(2))(1e3),["vm","repeat","if"]),h=[].slice,c=function(){try{return h.call(document.body.childNodes),h}catch(t){return function(t){t=t||0;for(var e=[],n=this.length;n>t;t++)e.push(this[t]);return e}}}();t.exports={slice:c,noop:r,addClass:function(t,e){if(t.classList)t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}},removeClass:function(t,e){if(t.classList)t.classList.remove(e);else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");t.setAttribute("class",n.trim())}},noexist:function(t,e){throw this.warn(t),new Error("Filter "+e+" hasn't implemented.")},warn:function(){return window.console&&console.error?function(){console.error.apply(console,arguments)}:r}(),isObject:function(t){return"object"==typeof t},nextTick:function(t,e){return e?a(function(){t.call(e)},0):a(t,0)},get:function(t,e){var n=[];return t&&n.push(t),e&&n.push(e),n.join(".")},walk:s}},function(t,e){function n(t){this.size=0,this.limit=t,this.head=this.tail=void 0,this._keymap={}}var i=n.prototype;i.put=function(t,e){var n={key:t,value:e};return this._keymap[t]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():void this.size++},i.shift=function(){var t=this.head;return t&&(this.head=this.head.newer,this.head.older=void 0,t.newer=t.older=void 0,this._keymap[t.key]=void 0),t},i.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail?e?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,e?n:n.value)},t.exports=n},function(t,e,n){var i=n(4),s=i.extend,r="QDataUid",a=0,o={};t.exports={find:function(t){return this.slice.call(document.querySelectorAll(t),0)},contains:i.contains,data:function(t,e,n){var i=t[r]=t[r]||++a,s=o[i]=o[i]||{};return void 0===n?s[e]:s[e]=n},cleanData:function(t){t.forEach(function(t){var e=t[r];e&&e in o&&delete o[e]})},add:i.event.add,remove:i.event.remove,clone:function(t){return t.cloneNode(!0)},extend:function(t){return 1===arguments.length?s(this,t):s.apply(this,arguments)}}},function(e,n){e.exports=t},function(t,e,n){t.exports=function(t){function e(e){return t.contains(h.documentElement,e)}function i(t){this._init(t)}var s=n(6),r=n(7),a=n(8).mergeOptions,o=n(9),h=document;return i._=t,i.options={directives:n(10),filters:{}},i.get=function(e){var n=t.find(e)[0];return n?t.data(n,"QI"):new this({el:e})},i.all=function(e){var n=this;return t.find(e.el).map(function(i){return new n(t.extend(e,{el:i}))})},t.extend(i,o),t.extend(i.prototype,{_init:function(e){e=e||{},this.$el=e.el&&"string"==typeof e.el?t.find(e.el)[0]:e.el,this.$$={},this.$parent=e._parent,e=this.$options=a(this.constructor.options,e,this),this._isCompiled=!1,this._isAttached=!1,this._isReady=!1,this._events={},this._watchers={},this._children=[],this.$={},s.call(this,e),this._initScope(),this._callHook("created"),this.$el&&(t.data(this.$el,"QI",this),this.$mount(this.$el))},$on:function(t,e){return(this._events[t]||(this._events[t]=[])).push(e),this},$once:function(t,e){function n(){i.$off(t,n),e.apply(this,arguments)}var i=this;return n.fn=e,this.$on(t,n),this},$off:function(t,e){var n,i,s;if(!arguments.length)return this._events={},this;if(n=this._events[t],!n)return this;if(1===arguments.length)return this._events[t]=null,this;for(s=n.length;s--;)if(i=n[s],i===e||i.fn===e){n.splice(s,1);break}return this},$watch:function(t,e,n,i){var s=n?t+"**deep**":t;return(this._watchers[s]||(this._watchers[s]=[])).push(e),i&&e(this.data(t)),this},$emit:function(e){var n=t.slice.call(arguments,1);return r.emit.call(this,e,t.slice.call(n,0)),e.indexOf("data:")||(e=e.substring(5),r.callChange.call(this,e,t.slice.call(n,0))),e.indexOf("deep:")||(e=e.substring(5),r.callDeep.call(this,e,t.slice.call(n,0)),n.unshift(e),r.emit.call(this,"datachange",n)),this},_initScope:function(){this._initMethods()},_initMethods:function(){var t,e=this.$options.methods;if(e)for(t in e)this[t]=e[t].bind(this)},$mount:function(n){return this._isCompiled?t.warn("$mount() should be called only once"):(this._compile(n),this._isCompiled=!0,this._callHook("compiled"),void(e(this.$el)?(this._callHook("attached"),this._ready()):this.$once("hook:attached",this._ready)))},_ready:function(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")},_compile:function(t){this.transclue(t,this.$options)},transclue:function(t,e){this._templateBind(t,e)},_templateBind:n(12),_callHook:function(t){var e=this.$options[t];if(e)for(var n=0,i=e.length;i>n;n++)e[n].call(this);this.$emit("hook:"+t)},_makeReadFilters:function(e){if(!e.length)return[];var n=this.$options.filters,i=this;return e.map(function(e){e=t.slice.call(e,0);var s=e.shift(),r=n[s]?n[s].read||n[s]:t.noexist(i,s);return function(t,n){var s=[t].concat(e||[]);return s.push(n),e?r.apply(i,s):r.call(i,t,n)}})},applyFilters:function(t,e,n){if(!e||!e.length)return t;for(var i=0,s=e.length;s>i;i++)t=e[i].call(this,t,n);return t}}),t.extend(i.prototype,s.prototype),i}},function(t,e,n){function i(t,e,n,i){var r=t._top,h=s(n),c={data:n,up:t,top:r,namespace:e+"",trigger:h?!1:i},l=r.data?r.data(t.$namespace(e)):void 0;"object"==typeof n&&null!==n?(t[e]=h?new o(c):new a(c),i&&t.$change(t.$namespace(e),t[e],l)):l!==n&&(t[e]=n,i&&t.$change(t.$namespace(e),n,l)),~t._keys.indexOf(e)||t._keys.push(e)}function s(t){return Array.isArray(t)||t instanceof o}function r(t){return t.filter(function(t){return"number"==typeof t}).length}function a(t){var e=t.data,n=Object.keys(t.data||{}).filter(function(t){return 0!==t.indexOf("_")}).map(function(t){return+t+""===t?+t:t}),a=this;c.extend(this,e),this._keys=n,this._up=t.up,this._top=t.top||this,this._namespace=t.namespace||"",n.forEach(function(n){i(a,n,e[n],t.trigger)}),s(e)&&(this.length=r(n))}function o(t){a.call(this,t)}function h(t){a.call(this,t)}var c=n(1);c.extend(a.prototype,{$namespace:function(t){for(var e=[],n=this;void 0!=n;n=n._up)n._namespace&&e.unshift(n._namespace);return t&&e.push(t),e.join(".")},$key:function(){var t=this._namespace;return+t+""===t?+t:t},$up:function(){return this._up},$set:function(t,e){if("object"==typeof t){var n=this;Object.keys(t).filter(function(t){return 0!==t.indexOf("_")}).forEach(function(e){i(n,e,t[e],!0)}),this.$change(this.$namespace(t),this,void 0,1)}else{var s=this[t];i(this,t,e,!0),this.$change(this.$namespace(t),this[t],s,void 0,-1)}return this},$get:function(){var t,e=this._keys,n=this;return t=this instanceof a?{}:[],e.forEach(function(e){t[e]=void 0===n[e]?void 0:n[e].$get?n[e].$get():n[e]}),t},$change:function(t,e,n,i,s){s=s||0;var r=this._top;r.$emit&&(~s&&this._top.$emit("data:"+t,e,n,i),s&&this._top.$emit("deep:"+t,e,n,i))}}),c.extend(o.prototype,a.prototype,{push:function(t){t=c.slice.call(arguments,0);for(var e=[],n=0,s=t.length;s>n;n++)this._keys.push(this.length),i(this,this.length,t[n]),e.push(this[this.length]),this.length++;return this.$change(this.$namespace(),this,null,{method:"push",res:e,args:t},1),this},pop:function(){var t=this[--this.length];return delete this[this.length],this._keys.pop(),this.$change(this.$namespace(),this,null,void 0,1),t},unshift:function(t){this._keys.push(this.length),this.length++;for(var e=this.length;e--;)this[e]=this[e-1],"object"==typeof this[e]&&(this[e]._namespace=e+"");return i(this,0,t),this.$change(this.$namespace(),this,null,void 0,1),this},shift:function(){this.length--;for(var t=this[0],e=0,n=this.length;n>e;e++)this[e]=this[e+1],"object"==typeof this[e]&&(this[e]._namespace=e+"");return this._keys.pop(),delete this[this.length],this.$change(this.$namespace(),this,null,void 0,1),t},touch:function(t){this.$change(this.$namespace(t),this,null,void 0,1)},indexOf:function(t){if(t._up===this){var e=+t._namespace;if(this[e]===t)return e}else if("object"!=typeof t)for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},splice:function(t,e){for(var n={method:"splice",args:[t,e]},i=0,s=e+t,r=this.length-e;r>t;t++,i++)e>i&&(this[t].__R__=!0,this[t]._namespace=void 0),this[t]=this[s+i],"object"==typeof this[t]&&(this[t]._namespace=t+"");for(;t<this.length;t++)this[t].__R__=!0,this[t]=null,delete this[t];this.length-=e,this._keys.splice(this.length,e),this.$change(this.$namespace(),this,null,n,1)},forEach:function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e)},filter:function(t){var e=[];return this.forEach(function(n,i){t(n)&&e.push(n)}),e}}),c.extend(h,{Data:a,DataArray:o}),c.extend(h.prototype,a.prototype,{data:function(t,e){if(void 0===t)return this;var n,s,r=0,a=this;if(~t.indexOf(".")){var o=t.split(".");for(n=o.length;n-1>r;r++){if(t=o[r],+t+""===t&&(t=+t),"object"!=typeof a)return;if(t in a)a=a[t];else{if(null==e)return;s=o[r+1],+s+""==s?i(a,t,[],!0):i(a,t,{},!0)}}}return n&&(t=o[r]),void 0===e?a&&t?a[t]:a:(a.$set(t,e),a[t])}}),t.exports=h},function(t,e,n){function i(t,e,n){n=n||this;var s=this._events[t];if(s){var r=0;s=s.length>1?a.slice.call(s,0):s;for(var o=s.length;o>r;r++)s[r].apply(n,e)}t.indexOf("data:")&&t.indexOf("hook:")&&t.indexOf("deep:")&&this.$parent&&i.call(this.$parent,t,e,n)}function s(t,e){var n={_events:this._watchers};i.call(n,t,e),i.call(n,t+"**deep**",e)}function r(t,e){var n,s=t.split("."),r={_events:this._watchers};for(s.pop();s.length>0;s.pop())t=s.join("."),n=t+"**deep**",i.call(r,n,[this.data(t)]);i.call(r,"**deep**",[this])}var a=(n(6),n(1));t.exports={emit:i,callChange:s,callDeep:r}},function(t,e,n){function i(t,e,n){function i(i){var s=r[i]||a;o[i]=s(t[i],e[i],n,i)}var s,o={};for(s in t)i(s);for(s in e)t.hasOwnProperty(s)||i(s);return o}var s=n(1),r={};r.created=r.ready=r.attached=r.detached=r.compiled=r.beforeDestroy=r.destroyed=r.paramAttributes=function(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t},r.filters=r.methods=r.directives=function(t,e){return e?t?s.extend({},t,e):e:t};var a=function(t,e){return void 0===e?t:e};t.exports={strats:r,mergeOptions:i}},function(t,e,n){function i(t,e){if(h[t])return!1;var n=h[t]=this.extend(e||{});return n}function s(t,e){return h[t]||this}function r(t){function e(){}return e.prototype=t,new e}function a(t){t=t||{};var e=this,n=o(t.name||"QComponent");return n.prototype=r(e.prototype),n.prototype.constructor=n,n.options=c(e.options,t),n["super"]=e,["extend","get","all","require","define"].forEach(function(t){n[t]=e[t]}),n}function o(t){return new Function("return function "+t+" (options) { this._init(options) }")()}var h={},c=n(8).mergeOptions;t.exports={define:i,require:s,extend:a}},function(t,e,n){function i(t,e,n){t.data(e,n)}var s=n(1);n(8);t.exports={cloak:{bind:function(){var t=this.vm,e=this.el;t.$once("hook:ready",function(){t.$once("datachange",function(){e.removeAttribute("q-cloak")})})}},show:function(t){var e=this.el;t?e.style.display="block":e.style.display="none"},"class":function(t){var e=this.el,n=this.arg;n?t?s.addClass(e,n):s.removeClass(e,n):(this.lastVal&&s.removeClass(e,this.lastVal),t&&(s.addClass(e,t),this.lastVal=t))},value:function(t){var e=this.el;"checkbox"===e.type?e.checked=t:e.value=t},attr:function(t){if(void 0!==t){var e=this.arg,n=this.el;if("style"===e)if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(n.style[i]=t[i]);else n.setAttribute(e,t);else e in n?n[e]=t:n.setAttribute(e,t)}},text:function(t){var e;void 0!==t&&(e="string"==typeof this.el.textContent?"textContent":"innerText")&&(this.el[e]=null==t?"":t.toString())},html:function(t){this.el.innerHTML=t&&t.toString()||""},on:{bind:function(){var t=this,e=this.target,n=this.param,i=this.filters,r=this.vm,a=r.applyFilters(this.vm[e],i),o=n&&~n.indexOf("this")&&t.data();s.add(this.el,this.arg,function(i){if(!a||"function"!=typeof a)return s.warn("You need implement the "+e+" method.");var h=[];n?n.forEach(function(e){"e"===e?h.push(i):"this"===e?h.push(o):"true"===e?h.push(!0):"false"===e?h.push(!1):+e+""===e?h.push(+e):e.match(/^(['"]).*\1$/)?h.push(e.slice(1,-1)):h.push(t.data(e))}):h.push(i),a.apply(r,h)})}},model:{bind:function(){var t=this.target,e=this.namespace||"",n=this.el,i=this.vm,r=i.data(e),a=!1;s.add(n,"input propertychange change",function(e){a||r.$set(t,n.value)},i),s.add(n,"compositionstart",function(t){a=!0}),s.add(n,"compositionend",function(t){a=!1})},update:function(t){this.el.value=t}},vm:{bind:function(){function t(e,r,o,h){if(f.__R__)return a.$off("datachange",t);if(this===n)if(m&&e===m)m=!1;else{var c=s.get(f.$namespace(),e);g=c,h?a.data(c)[h.method].apply(a.data(c),h.args):i(a,c,r)}else if(this===a)if(g)g=!1;else if(!u||e!==u&&!e.indexOf(u+".")){var l,p=u.length;p&&(p+=1),l=e.substring(p,e.length),m=l,h?n.data(l)[h.method].apply(n.data(l),h.args):i(n,l,r)}else!u.indexOf(e)&&v&&(m=u,n.$set(v),v=void 0)}this.setting.stop=!0;var e,n,r=this.target,a=this.vm,o=this.el,h=o.getAttribute("q-ref")||!1,c=o.getAttribute("q-with")||"",l=this.namespace,u=s.get(l,c),f=a.data(u),p=a.constructor.require(r),d=p.options.data;d&&f?Object.keys(d).forEach(function(t){t in f||f.$set(t,d[t])}):f=a.data(u,d),e={el:o,data:f.$get(),_parent:a},n=new p(e),a._children.push(n),h&&!function(){var t=a.$[h];t?t.length?t.push(n):a.$[h]=[t,n]:a.$[h]=n}();var v,m=!1,g=!1;u&&a.$watch(u,function(t,e,n){g&&u===g||(v=t)}),a.$on("datachange",t)}},"if":{bind:function(){if(this.el.parentNode){var t=this.el,e=t.parentNode,n=document.createComment("q-if"),i=!1,s=!0,r=this.target,a=this.namespace,o=a?[a,r].join("."):r,h=this.filters,c=this.data(),l=this.vm;this.setting.stop=!0,l.$watch(o,function(r,o){r=l.applyFilters(r,h,o),i||r!==!0||(i=!0,l._templateBind(t,{data:c,namespace:a,immediate:!0})),r!==s&&(r===!0?(e.replaceChild(t,n),s=r):r===!1&&(e.replaceChild(n,t),s=r))},!1,!0)}}},el:{bind:function(){this.vm.$$[this.target]=this.el}},repeat:n(11)}},function(t,e,n){function i(t,e,n,i){var s,r,a,o,h=e.length;Object.keys(t).forEach(function(c){~c.indexOf(e)&&(s=c.substring(h+1),r=s.split("."),r.length&&(a=+r.shift(),(a-=i)>=n&&(r.unshift(a),r.unshift(e),o=r.join("."),t[o]=t[c],delete t[c])))})}var s=n(1);methods={"default":{clean:function(t,e){e.length&&(e.forEach(function(e){e.parentNode===t&&t.removeChild(e)}),s.cleanData(e),e.length=0)},insert:function(t,e,n){t.insertBefore(e,n)}},push:{insert:function(t,e,n){t.insertBefore(e,n)},dp:function(t,e){return e.res}},splice:{clean:function(t,e,n,s){var r=n[0],a=n[1],o=n[2].$namespace(),h=e.splice(r,a);return h.forEach(function(e){t.removeChild(e)}),n.done||(i(s,o,r,a),n.done=!0),!0},dp:function(t,e){return e.args.push(t),e.args}}},e.bind=function(){var t,e,n,i,r,a,o,h=this.el,c=this.setting,l=h.parentNode;l&&!c.stop&&(c.stop=!0,t=this.target,e=this.namespace,n=s.get(e,t),i=this.filters,r=[],a=document.createComment("q-repeat"),o=this.vm,l.replaceChild(a,h),o.$watch(n,function(t,e,c){if(t=o.applyFilters(t,i),void 0!==t){var u=!i.length&&c?c.method:"default",f=(methods[u]||{}).dp,p=(methods[u]||{}).clean,d=(methods[u]||{}).insert;if(f&&(t=f(t,c)),!p||p(l,r,t,o._watchers,n)!==!0){var v,m=document.createDocumentFragment();t.forEach(function(t,e){v=s.clone(h),o._templateBind(v,{data:t,namespace:t.$namespace(),immediate:!0}),r.push(v),m.appendChild(v)}),d&&d(l,m,a),o.$emit("repeat-render")}}},!1,!0))}},function(t,e,n){var i=n(13),s=n(1);t.exports=function(t,e){e=e||{};var n=this,r=n.$options.directives,a=(e.index,e.data||n,e.namespace);s.walk([t],function(t,o,h){o.forEach(function(o){var c=o.name.substring(2),l=r[c],u=i(o.value);l&&u.forEach(function(i){var r=n._makeReadFilters(i.filters),o=i.target,c=s.get(a,o),u=s.isObject(l)?l.update:l,f=s.extend({el:t,vm:n,data:function(t){return n.data(s.get(a,t))},namespace:a,setting:h},i,{filters:r}),p=f.data(o);u&&n.$watch(c,function(t,e){t=n.applyFilters(t,r,e),u.call(f,t,e)},"object"==typeof p,"boolean"==typeof e.immediate?e.immediate:void 0!==p),s.isObject(l)&&l.bind&&l.bind.call(f)})})})}},function(t,e,n){function i(t){var e=t,n=r.get(e);if(n)return n;for(var i,h,c,l=[],u=a.length,f=!1,p={filter:!1,token:{filters:[]}};t.length;){for(h=0;u>h;h++)if(i=a[h][0].exec(t)){f=!0,c=a[h][1],c&&c(i,p,l),t=t.replace(a[h][0],""),p.filter&&(i=o.exec(t),s(i[0].trim(),p.token),t=t.replace(o,""),p.filter=!1);break}if(!f)throw new Error("Syntax error at: "+t);f=!1}return l.push(p.token),r.put(e,l),l}function s(t,e){for(var n,i=h.length,s=!1;t.length;){for(n=0;i>n;n++)if(captures=h[n][0].exec(t)){s=!0,foo=h[n][1],foo&&foo(captures,e.filters),t=t.replace(h[n][0],"");break}if(!s)throw new Error("Syntax error at: "+t);s=!1}}var r=new(n(2))(1e3),a=[[/^ +/],[/^([\w\-]+):/,function(t,e){e.token.arg=t[1]}],[/^([\w]+)\((.+?)\)/,function(t,e){e.token.target=t[1],e.token.param=t[2].split(/ *, */)}],[/^([\w\-\.]+)/,function(t,e){e.token.target=t[1]}],[/^(?=\|)/,function(t,e){e.filter=!0}],[/^,/,function(t,e,n){n.push(e.token),e.token={filters:[]}}]],o=/^(.+?)(?=,|$)/,h=[[/^ +/],[/^\| *([\w\-\!]+)/,function(t,e){e.push([t[1]])}],[/^(['"])(((\\['"])?([^\1])*)+)\1/,function(t,e){e[e.length-1].push(t[3])}],[/^([\w\-]+)/,function(t,e){e[e.length-1].push(t[1])}]];t.exports=i}])});